{% extends "base.html" %}

{% block title %}考试结果 - {{ exam.title }}{% endblock %}

{% block content %}
<h2>{{ exam.title }} - 考试结果</h2>
<p>得分：{{ result.score }} / {{ total_score }}</p>
<hr>
{% if questions %}
    <h3>试题详情</h3>
    <ol>
    {% for question in questions %}
        <li style="margin-bottom: 1.5em;">
            <div>
                <strong>{{ loop.index }}. {{ question.question_text }}</strong>
            </div>
            <ul>
                {% for key, value in question.options.items() %}
                    <li>
                        {{ key }}. {{ value }}
                        {% if key == question.correct_answer %}
                            <span style="color: green;">（正确答案）</span>
                        {% endif %}
                    </li>
                {% endfor %}
            </ul>
            <!-- 如有学生作答信息，可在此显示 -->
            {#
            <div>
                你的答案：{{ student_answer_map[question.id] if student_answer_map else '未作答' }}
            </div>
            #}
            {% if question.explanation %}
            <div style="color: #888; margin-top: 0.5em;">
                <strong>试题解析：</strong>{{ question.explanation }}
            </div>
            {% endif %}
        </li>
    {% endfor %}
    </ol>
{% endif %}
{% endblock %}